<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fundraise Up Demo</title>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MDYDRQMVT0"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-MDYDRQMVT0');
    </script>
</head>
<body>
    <h1>Welcome to Fundraise Up Demo</h1>

    <!-- Fundraise Up script -->
    <script>
    (function(w,d,s,n,a){
        a = "TEST1234"; // <-- –£–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π ID –Ø–í–ù–û
        if(!w[n]){
            var l='call,catch,on,once,set,then,track'.split(','),
            i,o=function(n){return'function'==typeof n?o.l.push([arguments])&&o
            :function(){return o.l.push([n,arguments])&&o}},t=d.getElementsByTagName(s)[0],
            j=d.createElement(s);
            j.async=!0;
            j.src='https://cdn.fundraiseup.com/widget/'+a;
            t.parentNode.insertBefore(j,t);
            o.s=Date.now();
            o.v=4;
            o.h=w.location.href;
            o.l=[];
            for(i=0;i<7;i++)o[l[i]]=o(l[i]);
            w[n]=o;
        }
    })(window,document,'script','FundraiseUp');
    </script>

    <!-- Donation button -->
    <button id="donate-button"
       style="display: block; background-color: #4285F4; color: white;
       text-decoration: none; padding: 10px 20px; border-radius: 5px; font-size: 20px;
       text-align: center; width: 200px; margin: 20px auto; display: block; cursor: pointer;">
        Donate
    </button>

    <!-- JavaScript –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —á–µ–∫–∞—É—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–±—ã—Ç–∏–π –≤ GA -->
    <script>
      document.addEventListener("DOMContentLoaded", function() {
          console.log("üîç Monitoring DOM for the Donate button...");

          let button = document.getElementById("donate-button");
          if (button) {
              console.log("‚úÖ Donate button found!");

              button.addEventListener("click", function() {
                  console.log("‚úÖ Donate button clicked!");
                  
                  // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–±—ã—Ç–∏–µ –æ—Ç–∫—Ä—ã—Ç–∏—è —á–µ–∫–∞—É—Ç–∞ –≤ GA
                  gtag('event', 'open_checkout', { 
                      'event_category': 'donation', 
                      'event_label': 'Donate Button' 
                  });

                  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–≥—Ä—É–∂–µ–Ω –ª–∏ Fundraise Up
                  if (typeof FundraiseUp !== "undefined") {
                      console.log("‚úÖ FundraiseUp script detected!");
                      FundraiseUp.set('sandbox', true);
                      console.log("üîÑ Enabling Sandbox mode...");

                      // –û—Ç–∫—Ä—ã–≤–∞–µ–º —á–µ–∫–∞—É—Ç (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Å—É–º–º—É –∏ –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã)
                      FundraiseUp.track('checkout', {
                          amount_editable: true,
                          currency: "USD"
                      });

                      console.log("üí∞ Checkout opened - waiting for user input...");

                      // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º —É—Å–ø–µ—à–Ω–æ–µ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ
                      FundraiseUp.on('donation', function(donation) {
                          console.log("‚úÖ Donation completed!", donation);

                          // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–±—ã—Ç–∏–µ –≤ Google Analytics
                          gtag('event', 'purchase', { 
                              'event_category': 'donation', 
                              'event_label': 'FundraiseUp Checkout', 
                              'value': donation.amount, 
                              'currency': donation.currency
                          });

                          console.log(`üí∞ Donation of ${donation.amount} ${donation.currency} sent to GA`);
                      });

                  } else {
                      console.error("‚ùå FundraiseUp is not defined! Check if the script is loaded.");
                  }
              });
          } else {
              console.error("‚ùå Donate button not found!");
          }
      });
    </script>

</body>
</html>

